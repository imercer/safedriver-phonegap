<!DOCTYPE HTML>
<html>
  <head>
    <title>Language Checker</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

	
    function checkLanguage() {
	  var en = "en"; 
	  var zh = "zh"; 
	  var ko = "ko";
      navigator.globalization.getPreferredLanguage(
	    function (language) {
		var lang = language.value;
			  if (lang.substring(0, en.length) === en)
				{ window.location.href='en/en.html' }
			  else if (lang.substring(0, zh.length) === zh)
				{ window.location.href='cn/cn.html' }
			  else if (lang.substring(0, ko.length) === ko)
				{ window.location.href='kr/kr.html' }
			  else { window.location.href='en/en.html' };
		},
        function () {alert('Error getting language\n');}  
      );
    }
	
	function checkLanguageInitial() {
	  var en = "en"; 
	  var zh = "zh"; 
	  var ko = "ko";
      navigator.globalization.getPreferredLanguage(
	    function (language) {
		var lang = language.value;
			  if (lang.substring(0, en.length) === en)
				{ window.location.href='en/welcome/en.html' }
			  else if (lang.substring(0, zh.length) === zh)
				{ window.location.href='cn/cn.html' }
			  else if (lang.substring(0, ko.length) === ko)
				{ window.location.href='kr/kr.html' }
			  else { window.location.href='en/welcome/en.html' };
		},
        function () {alert('Error getting language\n');}  
      );
    }
	function launch() {
	if (localStorage.isNotInitialLaunch) {
		checkLanguage();
	} else {
		localStorage.isNotInitialLaunch = 1;
		checkLanguageInitial();
	}
	}
    </script>
  </head>
  <body onload="launch()">
  </body>
</html>